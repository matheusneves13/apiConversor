-- O spring já gera pra mim o banco de dados, mas como foi necessário trazer ele, eu peguei ele aqui 

CREATE TABLE IF NOT EXISTS public.moeda
(
    id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    data_cadastro timestamp(6) without time zone NOT NULL,
    taxa_padrao numeric(19,3),
    tipo_moeda smallint,
    CONSTRAINT moeda_pkey PRIMARY KEY (id),
    CONSTRAINT moeda_tipo_moeda_check CHECK (tipo_moeda >= 0 AND tipo_moeda <= 1)
);

CREATE TABLE IF NOT EXISTS public.produto
(
    id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    data_atualizacao timestamp(6) without time zone,
    data_cadastro timestamp(6) without time zone NOT NULL,
    descricao character varying(255) COLLATE pg_catalog."default",
    taxa_exclusiva numeric(19,3),
    valor numeric(19,3),
    id_moeda bigint NOT NULL,
    CONSTRAINT produto_pkey PRIMARY KEY (id),
    CONSTRAINT fk20qrs2ofb4ph3mm1yfee6uook FOREIGN KEY (id_moeda)
        REFERENCES public.moeda (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
);

CREATE TABLE IF NOT EXISTS public.venda
(
    id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    data_atualizacao timestamp(6) without time zone,
    data_cadastro timestamp(6) without time zone NOT NULL,
    valor_venda numeric(19,3),
    id_moeda bigint NOT NULL,
    CONSTRAINT venda_pkey PRIMARY KEY (id),
    CONSTRAINT fk9kdbwcxuy3n1e7f7awa9uffuk FOREIGN KEY (id_moeda)
        REFERENCES public.moeda (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
);

CREATE TABLE IF NOT EXISTS public.item_venda
(
    id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    data_atualizacao timestamp(6) without time zone,
    data_cadastro timestamp(6) without time zone NOT NULL,
    quantidade integer,
    valor_item numeric(19,3),
    valor_total numeric(19,3),
    id_produto bigint NOT NULL,
    id_venda bigint NOT NULL,
    taxa_usada numeric(19,3),
    CONSTRAINT item_venda_pkey PRIMARY KEY (id),
    CONSTRAINT fk87qej2cxtg9b3px8smmpaq8nq FOREIGN KEY (id_venda)
        REFERENCES public.venda (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT fk8gx9ywjid5ol0tghn01vyxf68 FOREIGN KEY (id_produto)
        REFERENCES public.produto (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
);